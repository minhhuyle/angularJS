<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
          integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <title>Title</title>
</head>
<body>
<h1 class="text-info" align="center">QCM</h1>
<div class="container" ng-app="qcmMinh">
    <div ng-show="quiz.shouldShowNormalMode()" ng-controller="quizCtrl as quiz">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <button ng-click="quiz.changeMode()" class="btn btn-warning">Mode normal</button>
        </nav>

        <ul class="list-group">
            <br/>
            <li ng-repeat="qcm in quiz.getAllQcms()|answer:quiz.type" class="list-group-item">
                <button class="btn" ng-click="quiz.selectQcm(qcm)" ng-class="quiz.getClassFinishedQuiz(qcm)">
                    {{qcm.title}}
                </button>
            </li>
        </ul>
        <button class="btn" ng-class="quiz.filterAll()" ng-click="quiz.filterAll()">Tous</button>
        <button class="btn" ng-click="quiz.filterDone()">Répondus</button>
        <button class="btn" ng-click="quiz.filterUndone()">Pas répondus</button>

        <div class="alert alert-success" ng-if="quiz.getSelectedQcmTitle() && !quiz.isDone()">
            <h3>{{quiz.getSelectedQcmTitle()}} Selectionné</h3>
            <h4>Question numéro {{quiz.getIndexOfQuestion()}}</h4>
            <p>{{quiz.showQuestion()}}</p>
            <ul>
                <button ng-click="quiz.answerToQuestion(reponse)"
                        ng-repeat="reponse in quiz.getSelectedQcmResponses()">
                    {{reponse}}
                </button>
            </ul>
        </div>

        <div ng-show="quiz.getSelectedQcmTitle() && quiz.isDone()" ng-class="quiz.showLevel()">
            Score : {{quiz.showScore()}}
        </div>

        <div class="alert alert-success" ng-if="quiz.shouldShowReplay()">
            <h3>{{quiz.getSelectedQcmTitle()}}</h3>
            <h4>Question numéro {{quiz.getIndexOfQuestion()}}</h4>
            <ul>
                <button ng-class="quiz.showColorResponse(reponse)" ng-repeat="reponse in quiz.getSelectedQcmResponses()"
                        ng-click="quiz.replayNextQuestion()">{{reponse}}
                </button>
            </ul>
        </div>




    </div>

    <div ng-show="edit.shouldShowEditMode()" ng-controller="editCtrl as edit">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <button ng-click="edit.changeMode()" class="btn btn-info">Mode Edition</button>
        </nav>

        <ul class="list-group">
            <li class="list-group-item" ng-repeat="qcm in edit.getAllQcms()">
                <button class="btn" ng-click="edit.selectQcm(qcm)">
                    {{qcm.title}}
                </button>
            </li>

            <li class="list-group-item">
                <button class="btn btn-danger" ng-click="edit.addQCM()">Créer</button>

                <div ng-show="edit.shouldShowInputQCM()">
                    <form ng-submit="edit.submitQcm()" name="newQcm">
                        <p>QCM : <input ng-model="edit.qcmTitle" required type="text"></p>
                        <button ng-disabled="newQcm.$invalid" type="submit" class="btn">Valider</button>
                    </form>
                </div>
            </li>
        </ul>





        <div class="alert alert-success" ng-if="edit.getSelectedQcm()">
            <div class="btn-group">
                <button ng-click="edit.showPrevQuestion()" ng-disabled="edit.isFirstQuestion()"><</button>
                <h2>{{edit.getSelectedQcm().title}}</h2>
                <button ng-click="edit.showNextQuestion()" ng-disabled="edit.isLastQuestion()">></button>
            </div>
            <br/>

            <button ng-click="edit.addNewQuestion()" >Ajouter une question</button>




            <div ng-if="!edit.disableEditionWhenNoQuestionPresent()">
                <b>Question </b>
                <input type="text" ng-model="edit.getCurrentQuestionOfQcmSelected().enonce"/>

                <br/>
                <b>Reponses</b> <button ng-click="edit.addNewResponse()" ng-disabled="edit.disableAddResponseWhenItReach4()" >Ajouter une réponse</button>
                <br/>
                <table>
                    <tr ng-repeat="response in edit.getCurrentQuestionOfQcmSelected().responses track by $index">
                        <td>
                            <input type="radio" name="good" ng-model="edit.getCurrentQuestionOfQcmSelected().good"
                                   ng-value="$index"/>
                            <input type="text" ng-value="response"
                                   ng-model="edit.getCurrentQuestionOfQcmSelected().responses[$index]"/>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

    </div>

</div>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.6/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.6/angular-mocks.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.6/angular-resource.js"></script>
<script src="app.js"></script>

</body>
</html>